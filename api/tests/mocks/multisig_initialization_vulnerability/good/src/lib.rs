#![cfg_attr(not(feature = "export-abi"), no_main)]
extern crate alloc;

use stylus_sdk::prelude::*;
use alloc::vec::Vec;

#[storage]
#[entrypoint]
pub struct Multisig {
    owners: StorageVec<Address>,
    initialized: StorageBool,
}

#[public]
impl Multisig {
    pub fn initialize(&mut self, owners: Vec<Address>) -> Result<(), Vec<u8>> {
        if self.initialized.get() || owners.len() == 0 { // FIX: Validates and prevents reinitialization
            return Err(vec![1]);
        }
        for owner in owners {
            self.owners.push(owner);
        }
        self.initialized.set(true);
        Ok(())
    }
}
